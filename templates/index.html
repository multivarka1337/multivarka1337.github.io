{% extends "base.html" %}

{% block title %}CloudShare - Безопасный обмен файлами{% endblock %}

{% block content %}
<div class="hero">
    <div class="hero-content">
        <h1 class="hero-title">
            <i class="fas fa-cloud"></i>
            Обменивайтесь файлами легко и безопасно
        </h1>
        <p class="hero-subtitle">
            Загружайте файлы до 500MB и получайте ссылку для скачивания с любого устройства
        </p>
        
        <div class="upload-card" id="upload-section">
            <div class="upload-header">
                <i class="fas fa-cloud-upload-alt"></i>
                <h2>Загрузить файл</h2>
            </div>
            
            <div class="upload-area" id="drop-area">
                <input type="file" id="file-input" style="display: none;" multiple>
                <div class="upload-icon">
                    <i class="fas fa-file-upload"></i>
                </div>
                <p class="upload-text">Перетащите файлы сюда или</p>
                <button class="btn btn-primary" id="browse-btn">
                    <i class="fas fa-folder-open"></i> Выбрать файлы
                </button>
                <p class="upload-hint">Максимальный размер: 500MB</p>
                
                <div class="password-section">
                    <label for="password">
                        <i class="fas fa-lock"></i> Пароль (опционально):
                    </label>
                    <input type="password" id="password" placeholder="Защитить файл паролем">
                </div>
            </div>
            
            <div id="file-list" class="file-list"></div>
            
            <div class="upload-actions">
                <button class="btn btn-success" id="upload-btn" disabled>
                    <i class="fas fa-upload"></i> Начать загрузку
                </button>
                <button class="btn btn-secondary" id="clear-btn">
                    <i class="fas fa-trash"></i> Очистить
                </button>
            </div>
        </div>
        
        <div id="upload-progress" class="progress-container" style="display: none;">
            <div class="progress-header">
                <h3><i class="fas fa-spinner fa-spin"></i> Загрузка...</h3>
                <span id="progress-text">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>
        
        <div id="result-container" style="display: none;">
            <div class="result-card success">
                <div class="result-header">
                    <i class="fas fa-check-circle"></i>
                    <h3>Файл успешно загружен!</h3>
                </div>
                <div class="result-content">
                    <p><strong>Ссылка для скачивания:</strong></p>
                    <div class="link-container">
                        <input type="text" id="download-link" readonly>
                        <button class="btn btn-copy" onclick="copyLink()">
                            <i class="fas fa-copy"></i> Копировать
                        </button>
                    </div>
                    <div class="result-actions">
                        <a href="#" id="share-whatsapp" class="btn btn-social whatsapp">
                            <i class="fab fa-whatsapp"></i> WhatsApp
                        </a>
                        <a href="#" id="share-telegram" class="btn btn-social telegram">
                            <i class="fab fa-telegram"></i> Telegram
                        </a>
                        <a href="#" id="share-email" class="btn btn-social email">
                            <i class="fas fa-envelope"></i> Email
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="features" id="recent-files">
    <h2 class="section-title">
        <i class="fas fa-history"></i> Недавно загруженные файлы
    </h2>
    <div id="recent-files-container" class="files-grid">
        <!-- Файлы будут загружены через JavaScript -->
    </div>
    <div class="loading" id="loading-files">
        <i class="fas fa-spinner fa-spin"></i> Загрузка файлов...
    </div>
</div>

<div class="instructions">
    <h2 class="section-title">
        <i class="fas fa-question-circle"></i> Как это работает?
    </h2>
    <div class="steps">
        <div class="step">
            <div class="step-icon">
                <i class="fas fa-upload"></i>
            </div>
            <h3>1. Загрузите файл</h3>
            <p>Выберите файл с компьютера или перетащите его в выделенную область</p>
        </div>
        <div class="step">
            <div class="step-icon">
                <i class="fas fa-link"></i>
            </div>
            <h3>2. Получите ссылку</h3>
            <p>Система автоматически создаст уникальную ссылку для скачивания</p>
        </div>
        <div class="step">
            <div class="step-icon">
                <i class="fas fa-share-alt"></i>
            </div>
            <h3>3. Поделитесь</h3>
            <p>Отправьте ссылку друзьям или коллегам для скачивания файла</p>
        </div>
        <div class="step">
            <div class="step-icon">
                <i class="fas fa-download"></i>
            </div>
            <h3>4. Скачайте</h3>
            <p>Файл можно скачать с любого устройства через браузер</p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Инициализация переменных
    let selectedFiles = [];
    let uploadInProgress = false;
    
    // Функции для работы с файлами будут в script.js
</script>
{% endblock %}
